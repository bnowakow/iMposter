using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using iMposter.Model.Sensor;
using Nui.Vision;
using iMposter.Model.ExtensionMethod;
using Accord.Statistics.Models.Markov.Topology;
using Accord.Statistics.Models.Markov;
using Accord.Statistics.Distributions.Fitting;
using Accord.Statistics.Models.Markov.Learning;
using Accord.Statistics.Distributions.Multivariate;
using Sharp3D.Math.Core;

namespace iMposter.Controller.Gesture
{
    public delegate void GestureCaptureCompleteDelegate(double[][] gesturePath);

    public class GestureDetector
    {
        static GestureDetector instance = null;
        static readonly object padlock = new object();

        public event GestureCaptureCompleteDelegate GestureCaptureComplete;


        public bool Capturing { get; set; }
        protected ContinuousSequenceClassifier classifier;
        protected IList<NuiUser> singleGestureElements;

        public String[] Labels { get { return new String[] { "Idle gesture", "Navigation gesture", "Zoom gesture" }; } }
        public enum GestureCodes { IDLE, NAVIGATION, ZOOM };

        protected int singleGestureLegth = 20; // number of consecutive points of move in gesture
        protected int singleGestureElementDiemension = 4; // left and right hand angle
        protected bool centerStatistics = false; // TODO protect from multiply applying center for the same training data

        public static GestureDetector Instance
        {
            get
            {
                lock (padlock)
                {
                    if (instance == null)
                    {
                        instance = new GestureDetector();
                    }
                    return instance;
                }
            }
        }

        private GestureDetector()
        {
            BodyTracker bodyTracker = BodyTracker.Instance;
            bodyTracker.Tracker.UserUpdated += new Nui.Vision.NuiUserTracker.UserUpdatedHandler(Tracker_UserMoved);

            ClearSingleGesture();
            HiddenMarkovModelLearn(new double[][][] { }, new int[] { });
            //HiddenMarkovModelSampleInitialization();

            //recording = true;
        }

        protected void ClearSingleGesture()
        {
            singleGestureElements = new List<NuiUser>();
        }

        protected void HiddenMarkovModelSampleInitialization()
        {
            #region GesturesLearningInitialization
            double[][][] recordedNavigationGestureSequences = new double[][][] {
                new double[][] {new double[] {18.3125853538513, }, new double[] {18.4252943992615, }, new double[] {18.308572769165, }, new double[] {18.3238935470581, }, new double[] {18.434389591217, }, new double[] {17.9802947044372, }, new double[] {17.9967341423035, }, new double[] {17.5701842308044, }, new double[] {16.2622437477112, }, new double[] {15.3176407814026, }, new double[] {14.0409173965454, }, new double[] {12.7981834411621, }, new double[] {11.7843451499939, }, new double[] {10.3597154617309, }, new double[] {8.90531158447267, }, new double[] {7.54954433441164, }, new double[] {6.28664207458496, }, new double[] {6.33764648437498, }, new double[] {6.22445106506346, }, new double[] {5.98143434524536, }, },
new double[][] {new double[] {4.15559482574463, }, new double[] {3.42714452743532, }, new double[] {2.95288133621216, }, new double[] {2.82307624816894, }, new double[] {4.71156883239745, }, new double[] {5.49496316909792, }, new double[] {5.34259033203127, }, new double[] {6.43876361846923, }, new double[] {6.78756666183472, }, new double[] {6.25591945648195, }, new double[] {6.08065462112427, }, new double[] {5.18341636657715, }, new double[] {4.56836414337159, }, new double[] {3.28216457366944, }, new double[] {3.2695755958557, }, new double[] {1.28367042541504, }, new double[] {1.52931356430056, },  },
new double[][] {new double[] {20.813009262085, }, new double[] {22.6494598388672, }, new double[] {24.7238121032715, }, new double[] {26.1861600875854, }, new double[] {26.8329076766968, }, new double[] {26.7901391983032, }, new double[] {27.1050176620483, }, new double[] {27.088189125061, }, new double[] {27.4766883850098, }, new double[] {27.3438758850098, }, new double[] {27.5712556838989, }, new double[] {27.6408395767212, }, new double[] {28.3688926696777, }, new double[] {29.0398292541504, }, new double[] {28.9487962722778, }, new double[] {29.1709718704224, }, new double[] {28.8088502883911, }, new double[] {29.2633018493652, }, new double[] {29.2091360092163, }, new double[] {29.1785430908203, }, },
new double[][] {new double[] {28.7215785980225, }, new double[] {28.0676164627075, }, new double[] {26.8993139266968, }, new double[] {25.9606447219848, }, new double[] {25.0466508865357, }, new double[] {25.4333019256592, }, new double[] {26.1121664047241, }, new double[] {26.9747343063354, }, new double[] {27.8981800079346, }, new double[] {28.7153367996216, }, new double[] {27.1947374343872, }, new double[] {28.7609424591065, }, new double[] {30.722731590271, }, new double[] {31.1346092224121, }, new double[] {31.9880495071411, }, new double[] {32.2652826309204, }, new double[] {32.1149768829346, }, new double[] {32.5686502456665, }, new double[] {33.8796548843384, }, new double[] {34.0224056243896, }, },
new double[][] {new double[] {34.383246421814, }, new double[] {35.2833137512207, }, new double[] {36.193675994873, }, new double[] {35.5259656906128, }, new double[] {34.4623308181763, }, new double[] {32.5580635070801, }, new double[] {31.6873245239258, }, new double[] {31.9630823135376, }, new double[] {32.8334484100342, }, new double[] {33.2931203842163, }, new double[] {33.0081701278686, }, new double[] {32.8062763214111, }, new double[] {32.8220672607422, }, new double[] {32.7958841323852, }, new double[] {31.2561702728271, }, new double[] {31.8008766174316, }, new double[] {31.886721611023, }, new double[] {31.1587495803833, }, new double[] {32.6065711975098, }, new double[] {32.5617275238037, }, },
new double[][] {new double[] {32.5206937789917, }, new double[] {32.3082942962647, }, new double[] {31.3174047470093, }, new double[] {30.1711673736572, }, new double[] {29.9452629089356, }, new double[] {29.2189931869507, }, new double[] {28.2394847869873, }, new double[] {26.7846593856811, }, new double[] {25.4547348022461, }, new double[] {24.4552688598633, }, new double[] {23.8232421875, }, new double[] {22.8308124542236, }, new double[] {21.1961097717285, }, new double[] {19.7402143478394, }, new double[] {19.1611375808716, }, new double[] {18.9861564636231, }, new double[] {18.9637994766235, }, new double[] {18.1666164398193, }, new double[] {17.0810298919678, }, new double[] {16.3923892974853, }, },
new double[][] {new double[] {16.7234153747559, }, new double[] {16.1912412643433, }, new double[] {15.5696392059326, }, new double[] {16.3660926818848, }, new double[] {17.3539342880249, }, new double[] {18.5774726867676, }, new double[] {18.9060831069946, }, new double[] {19.8665418624878, }, new double[] {20.0581245422363, }, new double[] {20.1732654571533, }, new double[] {20.5442390441895, }, new double[] {21.793701171875, }, new double[] {22.4608764648437, }, new double[] {22.533800125122, }, new double[] {22.8696413040161, }, new double[] {23.056960105896, }, new double[] {23.3960762023926, }, new double[] {23.6382255554199, }, new double[] {23.5420370101929, }, new double[] {23.5087203979492, }, },
new double[][] {new double[] {23.9325952529907, }, new double[] {24.2033109664917, }, new double[] {24.2682418823242, }, new double[] {24.3551731109619, }, new double[] {24.1491775512695, }, new double[] {23.7770042419434, }, new double[] {23.5590925216675, }, new double[] {23.6099348068238, }, new double[] {23.9830160140991, }, new double[] {24.4640398025513, }, new double[] {24.2251167297363, }, new double[] {24.4133758544922, }, new double[] {24.3511686325073, }, new double[] {23.5958299636841, }, new double[] {23.3278865814209, }, new double[] {23.8388547897339, }, new double[] {23.9141616821289, }, new double[] {23.8925504684448, }, new double[] {23.9345893859863, }, new double[] {23.6812210083008, }, },
new double[][] {new double[] {22.6296968460083, }, new double[] {22.2061624526977, }, new double[] {21.2159700393677, }, new double[] {20.7145671844482, }, new double[] {20.1640729904175, }, new double[] {19.9709339141846, }, new double[] {19.6975431442261, }, new double[] {20.8171434402466, }, new double[] {19.4112229347229, }, new double[] {17.9321031570434, }, new double[] {17.3454794883728, }, new double[] {16.9053354263305, }, new double[] {16.3352890014648, }, new double[] {16.1690950393677, }, new double[] {16.0205483436584, }, new double[] {15.8552784919739, }, new double[] {15.8819561004639, }, new double[] {15.9083337783814, }, new double[] {16.0934476852417, }, new double[] {16.5081543922424, }, },
new double[][] {new double[] {16.5760765075684, }, new double[] {16.3914732933044, }, new double[] {16.3382720947266, }, new double[] {16.2535376548767, }, new double[] {16.3328652381897, }, new double[] {16.3042340278625, }, new double[] {16.2916045188904, }, new double[] {16.5454187393189, }, new double[] {16.8146591186523, }, new double[] {17.0978989601135, }, new double[] {17.1122469902039, }, new double[] {17.4417490959167, }, new double[] {17.5171451568603, }, new double[] {17.7023968696594, }, new double[] {17.8622598648071, }, new double[] {18.2609000205993, }, new double[] {18.7834763526917, }, new double[] {18.8961043357849, }, new double[] {19.3224272727966, }, new double[] {19.9826879501343, }, },
new double[][] {new double[] {20.4809293746948, }, new double[] {20.9046258926392, }, new double[] {20.8408298492431, }, new double[] {20.9460973739624, }, new double[] {20.9706997871399, }, new double[] {20.8066945075989, }, new double[] {20.4043335914612, }, new double[] {20.5256028175354, }, new double[] {20.3543424606323, }, new double[] {20.4884843826294, }, new double[] {20.1324343681336, }, new double[] {20.3828358650208, }, new double[] {20.137225151062, }, new double[] {19.8417611122131, }, new double[] {20.0873961448669, }, new double[] {20.4323406219482, }, new double[] {20.3794798851013, }, new double[] {20.2667870521545, }, new double[] {20.0287718772888, }, new double[] {20.102246761322, }, },
new double[][] {new double[] {20.3084368705749, }, new double[] {20.3315234184265, }, new double[] {20.4795351028442, }, new double[] {20.8501682281494, }, new double[] {21.5186486244202, }, new double[] {21.5070080757141, }, new double[] {21.5663862228393, }, new double[] {21.2488894462585, }, new double[] {21.2091526985169, }, new double[] {21.732880115509, }, new double[] {22.2245717048645, }, new double[] {22.4483199119568, }, new double[] {22.1536664962768, }, new double[] {22.7482261657715, }, new double[] {22.3349380493164, }, new double[] {21.926643371582, }, new double[] {22.2009906768799, }, new double[] {22.0376744270325, }, new double[] {21.8895168304443, }, new double[] {22.1801252365112, }, },
new double[][] {new double[] {21.7962465286255, }, new double[] {22.6319098472595, }, new double[] {22.7765493392944, }, new double[] {22.5753607749939, }, new double[] {22.2305865287781, }, new double[] {22.4317507743835, }, new double[] {22.9052195549011, }, new double[] {22.5677733421326, }, new double[] {22.1941246986389, }, new double[] {22.6632323265076, }, new double[] {22.8598408699036, }, new double[] {22.5571136474609, }, new double[] {22.3586649894715, }, new double[] {21.8820509910583, }, new double[] {21.4214386940002, }, new double[] {21.4532961845398, }, new double[] {20.8432292938233, }, new double[] {20.2704510688782, }, new double[] {19.8469409942627, }, new double[] {19.8344249725342, }, },
new double[][] {new double[] {19.1486864089966, }, new double[] {18.8697996139526, }, new double[] {19.1276264190674, }, new double[] {19.2188053131104, }, new double[] {19.1663012504578, }, new double[] {18.5686855316162, }, new double[] {18.1020097732544, }, new double[] {17.2372612953186, }, new double[] {16.339747428894, }, new double[] {16.1068067550659, }, new double[] {16.3424305915832, }, new double[] {15.8487448692322, }, new double[] {15.9574413299561, }, new double[] {15.8249855041504, }, new double[] {15.8756818771362, }, new double[] {15.4998931884766, }, new double[] {15.4028210639954, }, new double[] {15.6554760932922, }, new double[] {15.9911956787109, }, new double[] {15.921603679657, }, },
new double[][] {new double[] {16.288637638092, }, new double[] {16.5941777229309, }, new double[] {16.9476499557495, }, new double[] {17.2243318557739, }, new double[] {17.6996812820435, }, new double[] {18.1048469543457, }, new double[] {19.0671052932739, }, new double[] {19.1530961990357, }, new double[] {19.3395719528198, }, new double[] {20.1569962501526, }, new double[] {20.7203712463379, }, new double[] {21.2252840995789, }, new double[] {21.7800908088684, }, new double[] {22.3290367126465, }, new double[] {22.8001708984375, }, new double[] {23.1728630065918, }, new double[] {23.474479675293, }, new double[] {24.4307556152344, }, new double[] {24.5397520065308, }, new double[] {24.3803672790527, }, },
new double[][] {new double[] {24.6269264221191, }, new double[] {24.7032384872437, }, new double[] {25.3191499710083, }, new double[] {25.3414340019226, }, new double[] {25.6571474075317, }, new double[] {25.4404516220093, }, new double[] {25.6179294586182, }, new double[] {25.622031211853, }, new double[] {25.6024303436279, }, new double[] {26.0230870246887, }, new double[] {25.9135961532593, }, new double[] {25.7052822113037, }, new double[] {25.8440203666687, }, new double[] {25.9560647010803, }, new double[] {25.3890581130981, }, new double[] {25.5483293533325, }, new double[] {25.4456396102905, }, new double[] {25.5217328071594, }, new double[] {25.4097371101379, }, new double[] {25.3848915100098, }, },
new double[][] {new double[] {25.4724144935608, }, new double[] {24.9625244140625, }, new double[] {25.433699131012, }, new double[] {25.1627969741821, }, new double[] {24.7413215637207, }, new double[] {24.1848611831665, }, new double[] {23.7238435745239, }, new double[] {23.6852822303772, }, new double[] {23.8131742477417, }, new double[] {23.7441415786743, }, new double[] {24.5427107810974, }, new double[] {22.4561343193054, }, new double[] {22.9515953063965, }, new double[] {23.0437550544739, }, new double[] {22.8052048683167, }, new double[] {22.5243320465088, }, new double[] {21.8230214118957, }, new double[] {20.9757905006409, }, new double[] {21.1733150482178, }, new double[] {21.488477230072, }, },
new double[][] {new double[] {21.5435833930969, }, new double[] {21.8404660224915, }, new double[] {21.9587683677673, }, new double[] {22.1167831420898, }, new double[] {22.1688899993897, }, new double[] {21.829619884491, }, new double[] {21.967442035675, }, new double[] {22.2776999473572, }, new double[] {22.5949292182923, }, new double[] {23.0613374710083, }, new double[] {23.2349324226379, }, new double[] {23.5221118927002, }, new double[] {23.407262802124, }, new double[] {23.0093278884888, }, new double[] {22.9686994552612, }, new double[] {23.1466312408447, }, new double[] {23.2161827087402, }, new double[] {23.5599842071533, }, new double[] {23.84281873703, }, new double[] {23.7727646827698, }, },
new double[][] {new double[] {25.0982389450073, }, new double[] {24.6963725090027, }, new double[] {24.9166512489319, }, new double[] {24.86203956604, }, new double[] {24.2571363449097, }, new double[] {24.4361381530762, }, new double[] {24.7380628585815, }, new double[] {25.4084157943726, }, new double[] {25.6537103652954, }, new double[] {26.3498573303223, }, new double[] {24.9915933609009, }, new double[] {26.8293571472168, }, new double[] {27.8007917404175, }, new double[] {28.5883121490479, }, new double[] {29.2088766098023, }, new double[] {29.3832740783691, }, new double[] {28.4977006912231, }, new double[] {27.7088508605957, }, new double[] {28.1145191192627, }, new double[] {28.5825080871582, }, },
new double[][] {new double[] {27.9688014984131, }, new double[] {27.9344148635864, }, new double[] {28.028528213501, }, new double[] {27.7059001922607, }, new double[] {27.9045028686523, }, new double[] {27.8973207473755, }, new double[] {28.5081739425659, }, new double[] {28.7200870513916, }, new double[] {28.6109123229981, }, new double[] {28.42897605896, }, new double[] {28.2304220199585, }, new double[] {28.9738931655884, }, new double[] {28.8817253112793, }, new double[] {29.4292039871216, }, new double[] {29.9013595581055, }, new double[] {30.128625869751, }, new double[] {30.9892482757569, }, new double[] {31.3439445495605, }, new double[] {30.9650268554687, }, new double[] {31.5406503677368, }, },
new double[][] {new double[] {29.6643495559692, }, new double[] {29.0700979232788, }, new double[] {29.6902894973755, }, new double[] {30.2850275039673, }, new double[] {30.3149394989014, }, new double[] {30.7559833526611, }, new double[] {30.5183086395264, }, new double[] {30.7992706298828, }, new double[] {30.9689502716065, }, new double[] {31.3045644760132, }, new double[] {30.5779867172241, }, new double[] {30.2177295684815, }, new double[] {29.1412220001221, }, new double[] {29.3687477111817, }, new double[] {29.8644924163819, }, new double[] {30.2974948883057, }, new double[] {30.559326171875, }, new double[] {31.0163717269897, }, new double[] {30.9809150695801, }, new double[] {31.0535144805908, }, },
new double[][] {new double[] {29.0864887237549, }, new double[] {28.525164604187, }, new double[] {28.756386756897, }, new double[] {28.5404367446899, }, new double[] {28.8945169448853, }, new double[] {28.9015369415283, }, new double[] {28.4456911087036, }, new double[] {28.7842721939087, }, new double[] {29.4847478866577, }, new double[] {30.1132564544678, }, new double[] {29.7888126373291, }, new double[] {29.9060287475586, }, new double[] {29.8699560165405, }, new double[] {29.7874670028687, }, new double[] {29.82590675354, }, new double[] {29.4109811782837, }, new double[] {29.1305379867554, }, new double[] {28.3205795288086, }, new double[] {27.7316293716431, }, new double[] {26.963418006897, }, },
new double[][] {new double[] {25.7367506027222, }, new double[] {25.1669960021973, }, new double[] {25.0532655715942, }, new double[] {25.1497621536255, }, new double[] {24.69837474823, }, new double[] {24.6060934066773, }, new double[] {24.869140625, }, new double[] {25.4598579406738, }, new double[] {25.7723531723022, }, new double[] {25.7263097763061, }, new double[] {25.888466835022, }, new double[] {26.0224628448486, }, new double[] {25.9872331619263, }, new double[] {26.3572340011597, }, new double[] {26.7222414016724, }, new double[] {26.4373722076416, }, new double[] {26.0271806716919, }, new double[] {26.0052289962769, }, new double[] {25.7598371505738, }, new double[] {25.8343172073364, }, },
new double[][] {new double[] {25.0642576217651, }, new double[] {25.4068107604981, }, new double[] {25.2564563751221, }, new double[] {25.4936447143555, }, new double[] {24.7567720413208, }, new double[] {25.0629119873047, }, new double[] {26.2075443267823, }, new double[] {25.4084320068359, }, new double[] {24.3772382736206, }, new double[] {23.2194819450378, }, new double[] {23.3011360168457, }, new double[] {22.7396416664124, }, new double[] {22.1148376464844, }, new double[] {22.0636548995972, }, new double[] {21.5540080070496, }, new double[] {20.6240530014038, }, new double[] {20.2286796569824, }, new double[] {19.8983426094055, }, new double[] {19.6663503646851, }, new double[] {19.4162001609802, }, },
new double[][] {new double[] {19.0586910247803, }, new double[] {19.1373052597046, }, new double[] {18.9065937995911, }, new double[] {18.8359155654907, }, new double[] {18.4841213226318, }, new double[] {18.5132875442505, }, new double[] {18.2737565040588, }, new double[] {17.8619437217712, }, new double[] {17.8582715988159, }, new double[] {17.8307428359985, }, new double[] {17.9775142669678, }, new double[] {18.3225479125977, }, new double[] {18.3484311103821, }, new double[] {18.3852171897888, }, new double[] {18.1661381721497, }, new double[] {18.2125544548035, }, new double[] {17.9988255500794, }, new double[] {18.1842393875122, }, new double[] {17.6462936401367, }, new double[] {17.7537498474121, }, },
new double[][] {new double[] {18.4535608291626, }, new double[] {18.7970705032349, }, new double[] {18.7074317932129, }, new double[] {18.5995054244995, }, new double[] {18.7005333900452, }, new double[] {19.0750656127929, }, new double[] {18.7586712837219, }, new double[] {18.6390719413757, }, new double[] {18.7422318458557, }, new double[] {18.6555194854736, }, new double[] {19.0701451301575, }, new double[] {19.5416684150696, }, new double[] {19.8531098365784, }, new double[] {20.2593779563904, }, new double[] {20.1621112823486, }, new double[] {19.8897337913513, }, new double[] {19.868025302887, }, new double[] {19.636697769165, }, new double[] {19.6263785362244, }, new double[] {19.8152456283569, }, },
new double[][] {new double[] {20.1883916854858, }, new double[] {20.2970232963562, }, new double[] {20.5886936187744, }, new double[] {20.514181137085, }, new double[] {20.5753183364868, }, new double[] {20.5467438697815, }, new double[] {20.578577041626, }, new double[] {20.7637801170349, }, new double[] {20.8122148513794, }, new double[] {20.7791900634766, }, new double[] {20.9313278198242, }, new double[] {20.8765621185303, }, new double[] {20.999566078186, }, new double[] {21.6938486099243, }, new double[] {21.699182510376, }, new double[] {21.1823697090149, }, new double[] {20.9692974090576, }, new double[] {20.9602265357971, }, new double[] {20.9999794960022, }, new double[] {21.3099455833435, }, },
new double[][] {new double[] {21.2334065437317, }, new double[] {21.3360476493835, }, new double[] {21.0624947547913, }, new double[] {21.0016574859619, }, new double[] {20.3566284179688, }, new double[] {20.5226440429687, }, new double[] {20.5220441818237, }, new double[] {20.6614227294922, }, new double[] {20.5903067588806, }, new double[] {20.1661238670349, }, new double[] {19.725971698761, }, new double[] {19.5245966911316, }, new double[] {19.3129186630249, }, new double[] {19.3299012184143, }, new double[] {19.8334035873413, }, new double[] {19.9986491203308, }, new double[] {20.2160987854004, }, new double[] {20.1849627494812, }, new double[] {20.2647686004639, }, new double[] {20.1995782852173, }, },
new double[][] {new double[] {19.7456779479981, }, new double[] {20.1185727119446, }, new double[] {20.5803604125976, }, new double[] {20.3882508277893, }, new double[] {20.6544351577759, }, new double[] {20.7929058074951, }, new double[] {21.1201543807983, }, new double[] {21.4862480163574, }, new double[] {22.0920267105103, }, new double[] {22.0448241233826, }, new double[] {22.2918615341186, }, new double[] {22.5626664161682, }, new double[] {23.2980718612671, }, new double[] {23.6071786880493, }, new double[] {23.9128890037537, }, new double[] {23.8130121231079, }, new double[] {23.5973944664002, }, new double[] {23.8130850791931, }, new double[] {24.3044848442078, }, new double[] {24.1852989196777, }, },
new double[][] {new double[] {24.0833225250244, }, new double[] {24.4488649368286, }, new double[] {24.5089645385742, }, new double[] {24.5505738258362, }, new double[] {24.5366067886353, }, new double[] {24.4615268707275, }, new double[] {24.701244354248, }, new double[] {25.175929069519, }, new double[] {25.4183702468872, }, new double[] {25.6342554092407, }, new double[] {25.8545989990234, }, new double[] {25.7240238189697, }, new double[] {25.676926612854, }, new double[] {25.8348846435547, }, new double[] {26.1374416351318, }, new double[] {26.0498456954956, }, new double[] {25.877215385437, }, new double[] {25.5378561019898, }, new double[] {25.7151880264282, }, new double[] {26.1787996292114, }, },
new double[][] {new double[] {26.5217256546021, }, new double[] {26.7396049499512, }, new double[] {26.5787124633789, }, new double[] {26.0997314453125, }, new double[] {26.7635669708252, }, new double[] {26.8332319259643, }, new double[] {27.1397285461426, }, new double[] {26.9633045196533, }, new double[] {27.51233959198, }, new double[] {28.249698638916, }, new double[] {27.7687397003174, }, new double[] {27.9578094482422, }, new double[] {28.3045291900635, }, new double[] {28.0902328491211, }, new double[] {27.8986501693726, }, new double[] {27.5178194046021, }, new double[] {27.7674102783203, }, new double[] {28.1815738677979, }, new double[] {28.0391635894776, }, new double[] {28.1162700653076, }, },
new double[][] {new double[] {28.0423574447632, }, new double[] {27.5248718261719, }, new double[] {27.6611213684082, }, new double[] {27.7428970336914, }, new double[] {27.1678977012634, }, new double[] {27.4854431152344, }, new double[] {27.4541044235229, }, new double[] {27.3605341911316, }, new double[] {27.4255380630493, }, new double[] {27.1214814186096, }, new double[] {26.6008505821228, }, new double[] {26.5294103622437, }, new double[] {26.5291347503662, }, new double[] {26.3045516014099, }, new double[] {26.6831774711609, }, new double[] {26.4145369529724, }, new double[] {26.537362575531, }, new double[] {26.5053186416626, }, new double[] {26.16583776474, }, new double[] {25.6645402908325, }, },
new double[][] {new double[] {25.3184771537781, }, new double[] {25.3302879333496, }, new double[] {24.7983894348145, }, new double[] {24.340030670166, }, new double[] {24.2249870300293, }, new double[] {24.0928635597229, }, new double[] {24.1623015403748, }, new double[] {24.2821197509766, }, new double[] {24.1978554725647, }, new double[] {24.1370587348938, }, new double[] {24.106303691864, }, new double[] {24.3430137634277, }, new double[] {24.6897902488709, }, new double[] {25.2745170593262, }, new double[] {25.854428768158, }, new double[] {25.9063167572022, }, new double[] {25.1613297462463, }, new double[] {24.9493680000305, }, new double[] {25.4998216629028, }, new double[] {25.7346024513245, }, },
new double[][] {new double[] {25.5862665176392, }, new double[] {26.1853494644165, }, new double[] {26.2371644973755, }, new double[] {26.3343744277954, }, new double[] {26.1873273849487, }, new double[] {26.7505645751953, }, new double[] {26.5226984024048, }, new double[] {26.5679636001587, }, new double[] {26.2830295562744, }, new double[] {25.8054265975952, }, new double[] {25.5927352905273, }, new double[] {25.4823446273804, }, new double[] {25.57350730896, }, new double[] {25.4821176528931, }, new double[] {25.5475673675537, }, new double[] {25.3863019943238, }, new double[] {25.7834100723267, }, new double[] {26.1619548797608, }, new double[] {26.2597160339355, }, new double[] {26.3296403884888, }, },
new double[][] {new double[] {27.3250045776367, }, new double[] {27.6834783554077, }, new double[] {27.5677943229675, }, new double[] {27.3804106712341, }, new double[] {27.5350613594055, }, new double[] {27.5326294898987, }, new double[] {27.4642858505249, }, new double[] {27.6274480819702, }, new double[] {27.6906280517578, }, new double[] {27.9471821784973, }, new double[] {27.8638420104981, }, new double[] {28.4132580757141, }, new double[] {28.0478534698486, }, new double[] {27.9822902679443, }, new double[] {27.1783790588379, }, new double[] {27.7449641227722, }, new double[] {27.933434009552, }, new double[] {27.9788045883179, }, new double[] {28.0387744903564, }, new double[] {27.8577299118042, }, },
new double[][] {new double[] {27.2043514251709, }, new double[] {26.9502534866333, }, new double[] {26.9115543365479, }, new double[] {26.4818916320801, }, new double[] {26.9157695770264, }, new double[] {26.4481372833252, }, new double[] {25.8819007873535, }, new double[] {25.4310240745544, }, new double[] {24.8742232322693, }, new double[] {25.0831937789917, }, new double[] {24.8684272766113, }, new double[] {24.3856930732727, }, new double[] {23.824182510376, }, new double[] {23.5583953857422, }, new double[] {23.7675361633301, }, new double[] {23.6818208694458, }, new double[] {23.15975522995, }, new double[] {22.8154835700989, }, new double[] {22.4512948989868, }, new double[] {22.1143674850464, }, },
new double[][] {new double[] {21.7092990875244, }, new double[] {22.1423015594482, }, new double[] {22.0667839050293, }, new double[] {22.2214994430542, }, new double[] {22.5512609481812, }, new double[] {22.6311802864075, }, new double[] {23.0213899612427, }, new double[] {23.2254967689514, }, new double[] {23.5126276016235, }, new double[] {23.3508596420288, }, new double[] {23.4705157279968, }, new double[] {23.7602243423462, }, new double[] {24.6324710845947, }, new double[] {25.3329548835754, }, new double[] {25.7147178649902, }, new double[] {25.7645225524902, }, new double[] {26.264012336731, }, new double[] {26.7516670227051, }, new double[] {27.0131578445435, }, new double[] {27.6428823471069, }, },
new double[][] {new double[] {27.5286655426025, }, new double[] {27.3621311187744, }, new double[] {27.4073476791382, }, new double[] {27.4484624862671, }, new double[] {27.7949390411377, }, new double[] {28.0556678771973, }, new double[] {28.3857698440552, }, new double[] {28.9158363342285, }, new double[] {29.2178745269775, }, new double[] {29.7447309494019, }, new double[] {29.8960580825806, }, new double[] {29.8298950195313, }, new double[] {30.0075998306274, }, new double[] {30.4217958450317, }, new double[] {30.9965600967407, }, new double[] {31.3486137390137, }, new double[] {31.4419002532959, }, new double[] {31.9681568145752, }, new double[] {31.9221782684326, }, new double[] {32.0456037521362, }, },

                };

            double[][][] recordedZoomGestureSequences = new double[][][] {
                new double[][] {new double[] {-104.919386386871, }, new double[] {-105.198038101196, }, new double[] {-105.860017299652, }, new double[] {-106.494459629059, }, new double[] {-106.54532623291, }, new double[] {-106.434319496155, }, new double[] {-106.825088500977, }, new double[] {-107.055054187775, }, new double[] {-107.241270542145, }, new double[] {-106.407001495361, }, new double[] {-106.704800128937, }, new double[] {-107.065884113312, }, new double[] {-106.79967546463, }, new double[] {-106.241374969482, }, new double[] {-106.531886100769, }, new double[] {-106.700293064117, }, new double[] {-107.312970161438, }, new double[] {-107.273265838623, }, new double[] {-106.41111946106, }, new double[] {-105.562453746796, }, },
new double[][] {new double[] {-103.647640228271, }, new double[] {-102.847895622253, }, new double[] {-102.511641025543, }, new double[] {-102.290138244629, }, new double[] {-101.613827228546, }, new double[] {-100.954928398132, }, new double[] {-100.334720611572, }, new double[] {-99.1620488166809, }, new double[] {-97.7844920158386, }, new double[] {-97.7221550941467, }, new double[] {-97.028302192688, }, new double[] {-94.9696516990662, }, new double[] {-93.4188323020935, }, new double[] {-93.4982328414917, }, new double[] {-92.1246399879456, }, new double[] {-90.5689163208008, }, new double[] {-89.5709743499756, }, new double[] {-89.3905539512634, }, new double[] {-88.9758148193359, }, new double[] {-88.3879427909851, }, },
new double[][] {new double[] {-87.4667344093323, }, new double[] {-87.2812476158142, }, new double[] {-87.2227854728699, }, new double[] {-88.3516917228699, }, new double[] {-88.3551125526428, }, new double[] {-88.1764187812805, }, new double[] {-89.0214204788208, }, new double[] {-89.4835891723633, }, new double[] {-89.7808609008789, }, new double[] {-89.469030380249, }, new double[] {-89.3220319747925, }, new double[] {-89.5265197753906, }, new double[] {-89.3185868263244, }, new double[] {-88.9063282012939, }, new double[] {-89.1179089546204, }, new double[] {-88.7131080627441, }, new double[] {-88.9230918884277, }, new double[] {-89.2838110923767, }, new double[] {-89.3403844833374, }, new double[] {-90.3303580284119, }, },
new double[][] {new double[] {-92.0985703468323, }, new double[] {-92.9006414413452, }, new double[] {-92.9982891082764, }, new double[] {-93.5513205528259, }, new double[] {-94.2364673614502, }, new double[] {-94.6140556335449, }, new double[] {-95.7097506523132, }, new double[] {-95.5425515174866, }, new double[] {-96.6098017692566, }, new double[] {-97.6080355644226, }, new double[] {-98.6621294021606, }, new double[] {-98.894097328186, }, new double[] {-99.3330903053283, }, new double[] {-99.6340341567993, }, new double[] {-100.806089878082, }, new double[] {-101.125386238098, }, new double[] {-100.758522510529, }, new double[] {-100.604731082916, }, new double[] {-100.372746944427, }, new double[] {-100.68262386322, }, },
new double[][] {new double[] {-101.080810070038, }, new double[] {-101.75975561142, }, new double[] {-101.905197620392, }, new double[] {-102.54075050354, }, new double[] {-102.752079963684, }, new double[] {-103.130519390106, }, new double[] {-103.547317504883, }, new double[] {-103.801139831543, }, new double[] {-103.527230262756, }, new double[] {-103.960013866425, }, new double[] {-104.730567932129, }, new double[] {-105.104119300842, }, new double[] {-105.046824455261, }, new double[] {-104.988046169281, }, new double[] {-104.273036003113, }, new double[] {-105.186705589294, }, new double[] {-105.800485134125, }, new double[] {-106.292736053467, }, new double[] {-106.603569507599, }, new double[] {-107.278178215027, }, },
new double[][] {new double[] {-106.133667469025, }, new double[] {-106.246408939362, }, new double[] {-106.262183666229, }, new double[] {-105.884879112244, }, new double[] {-106.055215358734, }, new double[] {-105.754320144653, }, new double[] {-105.735797405243, }, new double[] {-105.335519790649, }, new double[] {-104.393413543701, }, new double[] {-104.112297534943, }, new double[] {-104.302299499512, }, new double[] {-104.007102966309, }, new double[] {-103.913702964783, }, new double[] {-103.469748973846, }, new double[] {-103.428431510925, }, new double[] {-103.859658718109, }, new double[] {-103.964674949646, }, new double[] {-103.586835384369, }, new double[] {-103.82511806488, }, new double[] {-103.956447124481, }, },
new double[][] {new double[] {-104.576995372772, }, new double[] {-104.211120605469, }, new double[] {-105.165434837341, }, new double[] {-104.645768642426, }, new double[] {-103.616585254669, }, new double[] {-103.105487346649, }, new double[] {-102.73536491394, }, new double[] {-102.053014755249, }, new double[] {-101.258595943451, }, new double[] {-100.502965450287, }, new double[] {-99.711829662323, }, new double[] {-99.3347601890564, }, new double[] {-99.2056279182434, }, new double[] {-98.587203502655, }, new double[] {-96.277575969696, }, new double[] {-95.5536165237427, }, new double[] {-94.7053804397583, }, new double[] {-94.0670795440674, }, new double[] {-91.9967641830444, }, new double[] {-90.9500389099121, }, },
new double[][] {new double[] {-89.1864471435547, }, new double[] {-87.7680187225342, }, new double[] {-86.2218928337097, }, new double[] {-84.7454724311829, }, new double[] {-83.2914171218872, }, new double[] {-83.2933950424194, }, new double[] {-81.9586229324341, }, new double[] {-80.5785775184631, }, new double[] {-80.7150540351868, }, new double[] {-80.8888516426086, }, new double[] {-80.0155024528503, }, new double[] {-79.1249437332153, }, new double[] {-79.0395283699036, }, new double[] {-79.2916078567505, }, new double[] {-79.3442335128784, }, new double[] {-78.9162650108337, }, new double[] {-78.8378777503967, }, new double[] {-78.7238879203797, }, new double[] {-78.930718421936, }, new double[] {-78.9838223457336, }, },
new double[][] {new double[] {-77.7679443359375, }, new double[] {-77.4228539466858, }, new double[] {-77.4401607513428, }, new double[] {-77.4954857826233, }, new double[] {-77.6764249801636, }, new double[] {-78.3275175094604, }, new double[] {-78.7736034393311, }, new double[] {-79.6072969436645, }, new double[] {-80.0131678581238, }, new double[] {-80.380615234375, }, new double[] {-80.4805974960327, }, new double[] {-81.012544631958, }, new double[] {-81.4033298492432, }, new double[] {-81.444079875946, }, new double[] {-81.2346959114075, }, new double[] {-81.8680357933044, }, new double[] {-82.1612381935119, }, new double[] {-82.2126317024231, }, new double[] {-82.1609869003296, }, new double[] {-82.8128414154053, }, },
new double[][] {new double[] {-82.8414969444275, }, new double[] {-82.6609063148499, }, new double[] {-82.1383461952209, }, new double[] {-81.8141293525696, }, new double[] {-81.8751044273376, }, new double[] {-82.0629177093506, }, new double[] {-81.5052981376648, }, new double[] {-81.0503034591675, }, new double[] {-80.5603384971619, }, new double[] {-80.6310896873474, }, new double[] {-80.5751323699951, }, new double[] {-79.6614465713501, }, new double[] {-78.9060754776001, }, new double[] {-78.2655291557312, }, new double[] {-77.4422764778137, }, new double[] {-76.9593477249145, }, new double[] {-75.61181640625, }, new double[] {-74.8909778594971, }, new double[] {-74.1097316741943, }, new double[] {-72.9688971042633, }, },
new double[][] {new double[] {-70.4518756866455, }, new double[] {-69.1893463134766, }, new double[] {-68.0133509635925, }, new double[] {-66.1196784973144, }, new double[] {-64.5253448486328, }, new double[] {-63.4831185340881, }, new double[] {-63.445611000061, }, new double[] {-62.8677339553833, }, new double[] {-61.5996761322021, }, new double[] {-61.0994324684143, }, new double[] {-60.7911849021912, }, new double[] {-60.4152665138245, }, new double[] {-59.8501486778259, }, new double[] {-59.3244433403015, }, new double[] {-58.6419553756714, }, new double[] {-57.8312187194824, }, new double[] {-57.3847193717957, }, new double[] {-56.8184423446655, }, new double[] {-56.3314523696899, }, new double[] {-55.5081996917725, }, },
new double[][] {new double[] {-53.3956913948059, }, new double[] {-52.7965598106384, }, new double[] {-51.4585371017456, }, new double[] {-51.016731262207, }, new double[] {-51.4097943305969, }, new double[] {-50.9356365203857, }, new double[] {-50.3010077476502, }, new double[] {-50.0319213867188, }, new double[] {-50.4893803596497, }, new double[] {-51.3974080085754, }, new double[] {-51.1549668312073, }, new double[] {-51.1678476333618, }, new double[] {-50.8985180854797, }, new double[] {-51.8527674674988, }, new double[] {-52.8265933990479, }, new double[] {-53.5372829437256, }, new double[] {-54.2799758911133, }, new double[] {-54.5343656539917, }, new double[] {-55.4806385040283, }, new double[] {-56.4057054519653, }, },
new double[][] {new double[] {-57.3729734420777, }, new double[] {-57.7989153862, }, new double[] {-57.9545388221741, }, new double[] {-58.1941914558411, }, new double[] {-58.731707572937, }, new double[] {-59.1546015739441, }, new double[] {-60.0030403137207, }, new double[] {-60.5764265060425, }, new double[] {-61.2661411762238, }, new double[] {-62.1272418498993, }, new double[] {-62.2604150772095, }, new double[] {-62.630099773407, }, new double[] {-63.2202334403991, }, new double[] {-63.6065034866333, }, new double[] {-64.0448195934296, }, new double[] {-63.9772419929504, }, new double[] {-64.1815271377563, }, new double[] {-64.4829897880554, }, new double[] {-64.6030430793762, }, new double[] {-64.671516418457, }, },
new double[][] {new double[] {-64.6099171638489, }, new double[] {-64.5205702781677, }, new double[] {-64.3229281902313, }, new double[] {-64.5526101589203, }, new double[] {-64.8005878925323, }, new double[] {-64.1242525577545, }, new double[] {-64.0861694812775, }, new double[] {-63.9889311790466, }, new double[] {-63.2527434825897, }, new double[] {-62.896665096283, }, new double[] {-62.6334071159363, }, new double[] {-62.5971560478211, }, new double[] {-62.5412473678589, }, new double[] {-62.6894454956055, }, new double[] {-62.9204244613647, }, new double[] {-62.4839808940887, }, new double[] {-62.4790239334106, }, new double[] {-62.342288017273, }, new double[] {-62.7115025520325, }, new double[] {-62.932243347168, }, },
new double[][] {new double[] {-62.727411031723, }, new double[] {-62.9468710422516, }, new double[] {-62.4980087280274, }, new double[] {-62.6289689540863, }, new double[] {-62.0293388366699, }, new double[] {-61.2381463050842, }, new double[] {-60.6038255691528, }, new double[] {-60.040385723114, }, new double[] {-59.5032749176025, }, new double[] {-59.2685914039612, }, new double[] {-58.9513378143311, }, new double[] {-58.9662289619446, }, new double[] {-59.1175155639648, }, new double[] {-58.5618252754211, }, new double[] {-57.8051166534424, }, new double[] {-57.3508191108704, }, new double[] {-56.762387752533, }, new double[] {-56.2358231544495, }, new double[] {-56.1939787864685, }, new double[] {-54.4070491790771, }, },
new double[][] {new double[] {-55.8894844055176, }, new double[] {-56.0980010032654, }, new double[] {-56.0529708862305, }, new double[] {-56.1253595352173, }, new double[] {-55.5800695419312, }, new double[] {-55.4702868461609, }, new double[] {-55.0338878631592, }, new double[] {-54.0564465522766, }, new double[] {-53.7955393791199, }, new double[] {-53.1716432571411, }, new double[] {-52.8282551765442, }, new double[] {-52.5715389251709, }, new double[] {-52.205647945404, }, new double[] {-52.3984708786011, }, new double[] {-52.2261486053467, }, new double[] {-51.7905359268189, }, new double[] {-52.0747079849243, }, new double[] {-51.8426671028137, }, new double[] {-51.058705329895, }, new double[] {-51.3722057342529, }, },
new double[][] {new double[] {-52.4726996421814, }, new double[] {-52.5130200386047, }, new double[] {-52.3434538841247, }, new double[] {-53.4154949188232, }, new double[] {-53.5428600311279, }, new double[] {-54.090630531311, }, new double[] {-54.6660676002502, }, new double[] {-54.9082088470459, }, new double[] {-55.563889503479, }, new double[] {-55.2902798652649, }, new double[] {-55.6726670265198, }, new double[] {-56.1946516036987, }, new double[] {-56.5717453956604, }, new double[] {-56.1282210350037, }, new double[] {-55.954261302948, }, new double[] {-56.6925525665283, }, new double[] {-55.9662017822265, }, new double[] {-56.6487627029419, }, new double[] {-57.0433578491211, }, new double[] {-57.336706161499, }, },
new double[][] {new double[] {-57.1200265884399, }, new double[] {-57.2188658714294, }, new double[] {-57.7665796279907, }, new double[] {-57.7866263389587, }, new double[] {-58.3539085388184, }, new double[] {-57.7005138397217, }, new double[] {-57.403582572937, }, new double[] {-57.2102813720703, }, new double[] {-56.5119132995606, }, new double[] {-56.9420866966248, }, new double[] {-56.9098563194275, }, new double[] {-56.8363976478577, }, new double[] {-56.9609985351563, }, new double[] {-56.8820843696594, }, new double[] {-57.2059202194214, }, new double[] {-58.5480122566223, }, new double[] {-59.9573373794556, }, new double[] {-61.4164509773255, }, new double[] {-62.1494083404541, }, new double[] {-63.1169357299805, }, },
new double[][] {new double[] {-65.8617949485779, }, new double[] {-66.1517062187195, }, new double[] {-66.6933159828186, }, new double[] {-66.3850522041321, }, new double[] {-66.542013168335, }, new double[] {-66.318046092987, }, new double[] {-67.0133905410766, }, new double[] {-67.0955917835236, }, new double[] {-68.0567071437836, }, new double[] {-69.0895302295685, }, new double[] {-69.691766500473, }, new double[] {-69.1114981174469, }, new double[] {-69.7368533611298, }, new double[] {-70.3174257278442, }, new double[] {-70.4836196899414, }, new double[] {-70.2905535697937, }, new double[] {-70.3112285137177, }, new double[] {-70.1590826511383, }, new double[] {-70.1967523097992, }, new double[] {-70.6988320350647, }, },
new double[][] {new double[] {-70.3515326976776, }, new double[] {-71.5306043624878, }, new double[] {-72.733167886734, }, new double[] {-73.087438583374, }, new double[] {-73.990630865097, }, new double[] {-74.2651929855347, }, new double[] {-75.1142356395721, }, new double[] {-75.7670588493347, }, new double[] {-75.8259263038635, }, new double[] {-74.7714636325836, }, new double[] {-74.5033419132233, }, new double[] {-74.3539805412293, }, new double[] {-73.1412720680237, }, new double[] {-73.7815144062042, }, new double[] {-74.1826512813568, }, new double[] {-74.9109880924225, }, new double[] {-74.9880783557892, }, new double[] {-75.1197559833527, }, new double[] {-76.2118194103241, }, new double[] {-76.0642251968384, }, },
new double[][] {new double[] {-75.252454996109, }, new double[] {-74.8433456420899, }, new double[] {-74.4583685398102, }, new double[] {-74.143725156784, }, new double[] {-74.1500155925751, }, new double[] {-73.7994575500488, }, new double[] {-73.0875196456909, }, new double[] {-72.7859678268432, }, new double[] {-72.4685399532318, }, new double[] {-73.0831747055054, }, new double[] {-73.131005525589, }, new double[] {-73.6790800094604, }, new double[] {-74.1450464725494, }, new double[] {-75.5211563110352, }, new double[] {-75.7954752445221, }, new double[] {-76.6971070766449, }, new double[] {-77.0130758285523, }, new double[] {-76.9437108039856, }, new double[] {-77.7264161109924, }, new double[] {-78.7275722026825, }, },
new double[][] {new double[] {-80.7493352890015, }, new double[] {-81.4773316383362, }, new double[] {-81.8406934738159, }, new double[] {-82.9662194252014, }, new double[] {-84.8252539634705, }, new double[] {-84.1932516098022, }, new double[] {-83.8515982627869, }, new double[] {-83.6988039016724, }, new double[] {-84.6162753105164, }, new double[] {-85.23299741745, }, new double[] {-86.7078857421875, }, new double[] {-86.299542427063, }, new double[] {-86.1312084197998, }, new double[] {-86.0479898452759, }, new double[] {-85.4774975776672, }, new double[] {-85.135528087616, }, new double[] {-84.0758328437805, }, new double[] {-83.8771896362305, }, new double[] {-82.7601590156555, }, new double[] {-82.1509432792664, }, },
new double[][] {new double[] {-79.6994404792786, }, new double[] {-78.0271248817444, }, new double[] {-77.2283854484558, }, new double[] {-76.7470617294312, }, new double[] {-73.6317842006683, }, new double[] {-72.9995427131653, }, new double[] {-72.8770656585693, }, new double[] {-71.7869598865509, }, new double[] {-70.3751299381256, }, new double[] {-70.6934697628021, }, new double[] {-70.7392659187317, }, new double[] {-69.8857283592224, }, new double[] {-68.7559993267059, }, new double[] {-67.3715887069702, }, new double[] {-66.726300239563, }, new double[] {-67.0179786682129, }, new double[] {-67.2823877334595, }, new double[] {-66.7268595695496, }, new double[] {-66.2103385925293, }, new double[] {-64.6541366577148, }, },
new double[][] {new double[] {-62.3926277160645, }, new double[] {-61.9731140136719, }, new double[] {-61.268171787262, }, new double[] {-60.1042547225952, }, new double[] {-59.7842936515808, }, new double[] {-59.2906160354614, }, new double[] {-58.636118888855, }, new double[] {-57.9645175933838, }, new double[] {-57.7655987739563, }, new double[] {-56.4906830787659, }, new double[] {-55.4561738967896, }, new double[] {-54.4319677352905, }, new double[] {-53.9253931045532, }, new double[] {-53.7745685577393, }, new double[] {-53.1281290054321, }, new double[] {-53.0552377700806, }, new double[] {-53.3176527023315, }, new double[] {-53.5055146217346, }, new double[] {-53.5941076278686, }, new double[] {-53.2118420600891, }, },
new double[][] {new double[] {-54.2445597648621, }, new double[] {-55.1017127037048, }, new double[] {-56.092529296875, }, new double[] {-56.7860174179077, }, new double[] {-56.6275324821472, }, new double[] {-57.2152829170227, }, new double[] {-57.6901783943176, }, new double[] {-59.4545564651489, }, new double[] {-59.4196429252625, }, new double[] {-59.3884582519531, }, new double[] {-59.7541627883911, }, new double[] {-60.2699298858643, }, new double[] {-60.6080975532532, }, new double[] {-61.1494317054749, }, new double[] {-61.4919767379761, }, new double[] {-61.419150352478, }, new double[] {-60.7497863769531, }, new double[] {-60.8754653930664, }, new double[] {-61.0413269996643, }, new double[] {-60.3953657150269, }, },
new double[][] {new double[] {-59.267942905426, }, new double[] {-58.1558895111084, }, new double[] {-58.3461589813232, }, new double[] {-58.1023478507996, }, new double[] {-57.8309998512268, }, new double[] {-57.604106426239, }, new double[] {-57.3458094596863, }, new double[] {-57.6751818656922, }, new double[] {-57.7716946601868, }, new double[] {-57.7516965866089, }, new double[] {-57.3533644676208, }, new double[] {-57.3227066993713, }, new double[] {-56.8817520141602, }, new double[] {-55.9052348136902, }, new double[] {-54.9180092811585, }, new double[] {-54.4098782539368, }, new double[] {-53.5978608131409, }, new double[] {-53.0132961273193, }, new double[] {-52.6566624641419, }, new double[] {-52.0225281715393, }, },
new double[][] {new double[] {-50.0957741737366, }, new double[] {-49.5578689575195, }, new double[] {-48.687891960144, }, new double[] {-48.02712059021, }, new double[] {-47.7258038520813, }, new double[] {-46.2679305076599, }, new double[] {-45.7499828338623, }, new double[] {-45.396632194519, }, new double[] {-44.6944704055786, }, new double[] {-44.9147248268128, }, new double[] {-44.5715718269348, }, new double[] {-44.5083270072937, }, new double[] {-44.3977417945862, }, new double[] {-44.4809279441833, }, new double[] {-44.6886177062988, }, new double[] {-44.4010896682739, }, new double[] {-44.3727421760559, }, new double[] {-43.920608997345, }, new double[] {-43.5566391944885, }, new double[] {-43.4767036437988, }, },
new double[][] {new double[] {-42.35888671875, }, new double[] {-42.4048490524292, }, new double[] {-42.986065864563, }, new double[] {-43.0056991577149, }, new double[] {-43.0888285636902, }, new double[] {-42.7625770568848, }, new double[] {-42.7130966186524, }, new double[] {-42.5975584983826, }, new double[] {-42.9358639717102, }, new double[] {-42.9645032882691, }, new double[] {-43.3049974441528, }, new double[] {-43.8106641769409, }, new double[] {-44.0594363212585, }, new double[] {-43.9802222251892, }, new double[] {-44.2006630897522, }, new double[] {-44.2246332168579, }, new double[] {-44.4478545188904, }, new double[] {-44.5354261398316, }, new double[] {-44.9455609321594, }, new double[] {-45.4115962982178, }, },
new double[][] {new double[] {-44.6604404449463, }, new double[] {-44.774178981781, }, new double[] {-45.041473865509, }, new double[] {-45.3826732635498, }, new double[] {-45.1037135124207, }, new double[] {-44.9765996932983, }, new double[] {-44.8085088729858, }, new double[] {-44.4306693077087, }, new double[] {-43.8903727531433, }, new double[] {-44.1490426063538, }, new double[] {-44.501193523407, }, new double[] {-44.8110380172729, }, new double[] {-44.4123330116272, }, new double[] {-44.8408932685852, }, new double[] {-45.3479866981506, }, new double[] {-45.8290185928345, }, new double[] {-45.7708563804627, }, new double[] {-45.8138599395752, }, new double[] {-46.1087079048157, }, new double[] {-46.5535049438477, }, },
new double[][] {new double[] {-46.6265258789062, }, new double[] {-46.4635419845581, }, new double[] {-46.6369829177857, }, new double[] {-46.6555461883545, }, new double[] {-46.5553126335144, }, new double[] {-46.4461379051208, }, new double[] {-46.7599787712097, }, new double[] {-46.7191476821899, }, new double[] {-46.5884103775024, }, new double[] {-46.5994510650635, }, new double[] {-46.8282737731934, }, new double[] {-46.9193878173828, }, new double[] {-47.1897468566895, }, new double[] {-47.8537445068359, }, new double[] {-47.3074979782104, }, new double[] {-47.6001653671265, }, new double[] {-48.0526957511902, }, new double[] {-48.1426343917847, }, new double[] {-49.6947507858277, }, new double[] {-50.6577062606811, }, },
new double[][] {new double[] {-51.5770177841186, }, new double[] {-51.426784992218, }, new double[] {-52.2785310745239, }, new double[] {-52.5514760017395, }, new double[] {-53.201587677002, }, new double[] {-54.1408405303955, }, new double[] {-55.4462275505066, }, new double[] {-55.171637058258, }, new double[] {-55.4930329322815, }, new double[] {-56.0278010368347, }, new double[] {-56.6557178497315, }, new double[] {-57.4557218551636, }, new double[] {-57.9834699630737, }, new double[] {-58.7535700798035, }, new double[] {-58.6486349105835, }, new double[] {-59.6688528060913, }, new double[] {-59.9072895050049, }, new double[] {-60.6707344055176, }, new double[] {-61.627010345459, }, new double[] {-63.0435094833374, }, },
new double[][] {new double[] {-64.4060292243958, }, new double[] {-65.584342956543, }, new double[] {-65.2564296722412, }, new double[] {-64.657054901123, }, new double[] {-65.6868057250977, }, new double[] {-65.4413166046143, }, new double[] {-64.3816375732422, }, new double[] {-64.7004313468933, }, new double[] {-64.3010778427124, }, new double[] {-64.7977466583252, }, new double[] {-64.5048685073853, }, new double[] {-67.1981720924377, }, new double[] {-67.2464690208435, }, new double[] {-66.7546882629395, }, new double[] {-65.7899332046509, }, new double[] {-65.1089367866516, }, new double[] {-63.163149356842, }, new double[] {-62.4938745498657, }, new double[] {-62.8106498718262, }, new double[] {-61.9186725616455, }, },
new double[][] {new double[] {-62.214825630188, }, new double[] {-62.5562925338745, }, new double[] {-63.445951461792, }, new double[] {-64.4074640274048, }, new double[] {-66.3743195533753, }, new double[] {-68.0537281036377, }, new double[] {-70.4353227615356, }, new double[] {-71.714729309082, }, new double[] {-72.5904130935669, }, new double[] {-74.2421388626099, }, new double[] {-76.2262687683105, }, new double[] {-78.0811042785644, }, new double[] {-80.3269925117493, }, new double[] {-81.6104481220246, }, new double[] {-82.7989513874054, }, new double[] {-83.8217267990112, }, new double[] {-84.022988319397, }, new double[] {-83.8546299934387, }, new double[] {-84.1380441188812, }, new double[] {-84.5638360977173, }, },
new double[][] {new double[] {-82.500107049942, }, new double[] {-81.8211979866028, }, new double[] {-81.3989200592041, }, new double[] {-80.614942073822, }, new double[] {-80.0113763809204, }, new double[] {-79.271285533905, }, new double[] {-79.0935726165771, }, new double[] {-78.884204864502, }, new double[] {-78.3302736282349, }, new double[] {-77.8145632743835, }, new double[] {-77.3575582504272, }, new double[] {-76.2946853637695, }, new double[] {-77.189224243164, }, new double[] {-77.4018831253052, }, new double[] {-76.7412900924683, }, new double[] {-76.7158365249634, }, new double[] {-76.4058136940002, }, new double[] {-76.5733046531677, }, new double[] {-76.4549293518066, }, new double[] {-76.050217628479, }, },
new double[][] {new double[] {-76.1405696868896, }, new double[] {-77.3943119049072, }, new double[] {-78.1999416351319, }, new double[] {-78.2109661102295, }, new double[] {-78.6475677490234, }, new double[] {-79.0954451560974, }, new double[] {-79.5844211578369, }, new double[] {-80.1156711578369, }, new double[] {-80.2331466674805, }, new double[] {-80.2477703094483, }, new double[] {-80.198938369751, }, new double[] {-80.5326557159424, }, new double[] {-80.9238786697388, }, new double[] {-81.3331460952759, }, new double[] {-81.9523649215698, }, new double[] {-83.4210681915283, }, new double[] {-84.0245447158813, }, new double[] {-85.0428981781006, }, new double[] {-86.0988807678223, }, new double[] {-87.5972528457641, }, },
new double[][] {new double[] {-90.8782014846802, }, new double[] {-92.1011562347412, }, new double[] {-92.9663829803467, }, new double[] {-93.9684753417969, }, new double[] {-94.5869646072388, }, new double[] {-95.7091426849365, }, new double[] {-97.0816736221313, }, new double[] {-98.5301923751831, }, new double[] {-100.233489990234, }, new double[] {-102.038918018341, }, new double[] {-103.850085258484, }, new double[] {-106.215718746185, }, new double[] {-107.990521430969, }, new double[] {-110.013107299805, }, new double[] {-111.980911254883, }, new double[] {-112.986193418503, }, new double[] {-113.875110626221, }, new double[] {-114.429021596909, }, new double[] {-114.885714530945, }, new double[] {-115.114099502563, }, },
new double[][] {new double[] {-114.602920532227, }, new double[] {-114.437225103378, }, new double[] {-114.771919250488, }, new double[] {-115.267753124237, }, new double[] {-115.441368341446, }, new double[] {-115.518811225891, }, new double[] {-115.183022737503, }, new double[] {-114.895324468613, }, new double[] {-114.503457069397, }, new double[] {-113.634278535843, }, new double[] {-112.856137037277, }, new double[] {-112.28900885582, }, new double[] {-111.707390785217, }, new double[] {-111.285660028458, }, new double[] {-109.889568328857, }, new double[] {-108.402123451233, }, new double[] {-107.326819658279, }, new double[] {-106.81548666954, }, new double[] {-106.158277988434, }, new double[] {-103.688576698303, }, },
new double[][] {new double[] {-98.8909277915954, }, new double[] {-97.7336173057556, }, new double[] {-97.2035264968872, }, new double[] {-97.0388565063477, }, new double[] {-96.8394675254822, }, new double[] {-96.8111200332641, }, new double[] {-97.4282150268555, }, new double[] {-97.918285369873, }, new double[] {-98.3774385452271, }, new double[] {-101.070004463196, }, new double[] {-104.867060661316, }, new double[] {-107.081922292709, }, new double[] {-108.46057343483, }, new double[] {-110.32673740387, }, new double[] {-111.432524681091, }, new double[] {-112.124796867371, }, new double[] {-113.205235958099, }, new double[] {-114.208657741547, }, new double[] {-115.272114276886, }, new double[] {-115.819090366364, }, },
new double[][] {new double[] {-116.418846130371, }, new double[] {-116.345792770386, }, new double[] {-116.278389453888, }, new double[] {-116.632907390594, }, new double[] {-116.286066055298, }, new double[] {-115.20001745224, }, new double[] {-114.083975791931, }, new double[] {-112.612905502319, }, new double[] {-111.608283996582, }, new double[] {-110.109133720398, }, new double[] {-108.802640199661, }, new double[] {-107.825316429138, }, new double[] {-107.202855110168, }, new double[] {-106.249627113342, }, new double[] {-106.109133958817, }, new double[] {-105.594834089279, }, new double[] {-105.371620893478, }, new double[] {-105.766686201096, }, new double[] {-106.196871757507, }, new double[] {-106.874086618423, }, },
new double[][] {new double[] {-107.481895923614, }, new double[] {-107.735029220581, }, new double[] {-107.875481843948, }, new double[] {-108.223490476608, }, new double[] {-108.307977676392, }, new double[] {-108.184584617615, }, new double[] {-108.182744503021, }, new double[] {-107.950290203094, }, new double[] {-107.938645601273, }, new double[] {-107.716826677322, }, new double[] {-106.730922460556, }, new double[] {-106.717024326324, }, new double[] {-106.038443565369, }, new double[] {-105.610535860062, }, new double[] {-105.07817530632, }, new double[] {-105.723062515259, }, new double[] {-105.961859941483, }, new double[] {-107.008573055267, }, new double[] {-107.321518182755, }, new double[] {-108.952970266342, }, },

new double[][] {new double[] {-220.776430130005, }, new double[] {-218.235588550568, }, new double[] {-217.782328605652, }, new double[] {-219.520807266235, }, new double[] {-221.890145301819, }, new double[] {-224.000991821289, }, new double[] {-225.859491348267, }, new double[] {-227.956184387207, }, new double[] {-229.907176017761, }, new double[] {-231.890244007111, }, new double[] {-232.473633289337, }, new double[] {-233.483296871185, }, new double[] {-229.258572101593, }, new double[] {-230.933246612549, }, new double[] {-233.226540088654, }, new double[] {-234.240572929382, }, new double[] {-234.606163978577, }, new double[] {-234.168030261993, }, new double[] {-234.201403617859, }, new double[] {-234.034828662872, }, },
new double[][] {new double[] {-233.491435527802, }, new double[] {-233.028269767761, }, new double[] {-232.83936214447, }, new double[] {-232.281548023224, }, new double[] {-231.471824645996, }, new double[] {-231.411781787872, }, new double[] {-231.476591110229, }, new double[] {-231.363776683807, }, new double[] {-231.16908121109, }, new double[] {-231.005278587341, }, new double[] {-230.541966915131, }, new double[] {-230.65025806427, }, new double[] {-230.388216018677, }, new double[] {-232.141983032227, }, new double[] {-236.962313175201, }, new double[] {-236.549551963806, }, new double[] {-236.205199241638, }, new double[] {-236.166256904602, }, new double[] {-237.496157169342, }, new double[] {-239.705153942108, }, },
new double[][] {new double[] {-244.141443252564, }, new double[] {-246.751439094543, }, new double[] {-248.661745548248, }, new double[] {-250.568971633911, }, new double[] {-251.322048664093, }, new double[] {-252.255902767181, }, new double[] {-252.841310501099, }, new double[] {-253.027218818665, }, new double[] {-253.637699127197, }, new double[] {-253.065115451813, }, new double[] {-252.760248184204, }, new double[] {-252.20873260498, }, new double[] {-251.818895816803, }, new double[] {-251.010866641998, }, new double[] {-250.516467571259, }, new double[] {-249.210051059723, }, new double[] {-248.063076019287, }, new double[] {-246.938555240631, }, new double[] {-246.073247432709, }, new double[] {-245.015951633453, }, },
new double[][] {new double[] {-243.119125843048, }, new double[] {-242.159145355225, }, new double[] {-240.935193538666, }, new double[] {-239.947376251221, }, new double[] {-239.003154277802, }, new double[] {-238.44349193573, }, new double[] {-238.542631149292, }, new double[] {-239.259773254395, }, new double[] {-239.874930858612, }, new double[] {-240.862561702728, }, new double[] {-242.937821865082, }, new double[] {-244.881477355957, }, new double[] {-246.679536819458, }, new double[] {-247.586851119995, }, new double[] {-249.450822353363, }, new double[] {-250.092908859253, }, new double[] {-250.290838718414, }, new double[] {-251.346383571625, }, new double[] {-252.203301429749, }, new double[] {-253.392663955688, }, },
new double[][] {new double[] {-254.552641391754, }, new double[] {-255.22219991684, }, new double[] {-255.835655212402, }, new double[] {-256.946111679077, }, new double[] {-257.382753849029, }, new double[] {-256.959624767303, }, new double[] {-256.55574798584, }, new double[] {-255.698984146118, }, new double[] {-254.732161998749, }, new double[] {-253.305943489075, }, new double[] {-252.202093601227, }, new double[] {-251.284978866577, }, new double[] {-250.149538993835, }, new double[] {-247.492381095886, }, new double[] {-248.139169216156, }, new double[] {-247.545614719391, }, new double[] {-247.243835926056, }, new double[] {-244.22390794754, }, new double[] {-241.513232707977, }, new double[] {-238.863467693329, }, },
new double[][] {new double[] {-236.100718021393, }, new double[] {-230.718447685242, }, new double[] {-226.402989864349, }, new double[] {-222.325620174408, }, new double[] {-219.398508548737, }, new double[] {-216.924916267395, }, new double[] {-214.006032466888, }, new double[] {-211.616728782654, }, new double[] {-209.895346164703, }, new double[] {-209.681722640991, }, new double[] {-210.551051139832, }, new double[] {-212.046748161316, }, new double[] {-212.520289897919, }, new double[] {-213.237748146057, }, new double[] {-214.924906253815, }, new double[] {-216.787086009979, }, new double[] {-218.635768890381, }, new double[] {-220.807639122009, }, new double[] {-223.447490215302, }, new double[] {-224.073485851288, }, },
new double[][] {new double[] {-228.69132232666, }, new double[] {-229.286611557007, }, new double[] {-230.944716930389, }, new double[] {-233.671491146088, }, new double[] {-235.447347640991, }, new double[] {-237.234860897064, }, new double[] {-238.813249588013, }, new double[] {-240.649205684662, }, new double[] {-248.332827091217, }, new double[] {-252.356728076935, }, new double[] {-254.808433532715, }, new double[] {-256.238251209259, }, new double[] {-257.052076339722, }, new double[] {-257.906870365143, }, new double[] {-258.369582176209, }, new double[] {-258.759556770325, }, new double[] {-259.324950218201, }, new double[] {-259.834661960602, }, new double[] {-260.093477725983, }, new double[] {-260.857944011688, }, },
new double[][] {new double[] {-259.1646900177, }, new double[] {-257.873813152313, }, new double[] {-256.532661437988, }, new double[] {-254.836505413055, }, new double[] {-251.628277778625, }, new double[] {-248.707813262939, }, new double[] {-245.75580739975, }, new double[] {-242.763562202454, }, new double[] {-238.87235212326, }, new double[] {-235.282783031464, }, new double[] {-231.725411891937, }, new double[] {-229.026174545288, }, new double[] {-226.551082611084, }, new double[] {-224.841364860535, }, new double[] {-223.424849510193, }, new double[] {-223.107912063599, }, new double[] {-223.218262195587, }, new double[] {-224.494385719299, }, new double[] {-225.779053211212, }, new double[] {-227.262420654297, }, },
new double[][] {new double[] {-231.693335533142, }, new double[] {-234.026114463806, }, new double[] {-235.832596302032, }, new double[] {-237.022493839264, }, new double[] {-238.077487468719, }, new double[] {-239.038756847382, }, new double[] {-239.152098178864, }, new double[] {-238.890810012817, }, new double[] {-238.510814189911, }, new double[] {-237.535115718842, }, new double[] {-235.841772556305, }, new double[] {-234.407512664795, }, new double[] {-233.223005771637, }, new double[] {-232.036861419678, }, new double[] {-233.797486305237, }, new double[] {-234.667617321014, }, new double[] {-234.683302879333, }, new double[] {-233.934562683105, }, new double[] {-232.248012542725, }, new double[] {-229.911950588226, }, },
new double[][] {new double[] {-228.613940238953, }, new double[] {-225.999315738678, }, new double[] {-223.89505147934, }, new double[] {-221.287471294403, }, new double[] {-219.43705368042, }, new double[] {-219.376783847809, }, new double[] {-220.541892528534, }, new double[] {-222.025357246399, }, new double[] {-222.252834320068, }, new double[] {-222.089566707611, }, new double[] {-224.53028011322, }, new double[] {-226.848159790039, }, new double[] {-229.800854682922, }, new double[] {-231.709248065949, }, new double[] {-233.571200847626, }, new double[] {-235.109171867371, }, new double[] {-236.636142730713, }, new double[] {-237.331633090973, }, new double[] {-237.566592216492, }, new double[] {-238.304194450378, }, },
new double[][] {new double[] {-238.545460224152, }, new double[] {-239.159831523895, }, new double[] {-239.155186653137, }, new double[] {-236.820697307587, }, new double[] {-237.044364452362, }, new double[] {-235.106464385986, }, new double[] {-235.704501628876, }, new double[] {-233.07188129425, }, new double[] {-230.995056629181, }, new double[] {-232.548713207245, }, new double[] {-230.510936260223, }, new double[] {-228.268866062164, }, new double[] {-226.261528015137, }, new double[] {-225.415140151978, }, new double[] {-224.688359737396, }, new double[] {-224.382171154022, }, new double[] {-223.521864891052, }, new double[] {-223.405807971954, }, new double[] {-223.635117053986, }, new double[] {-223.737750053406, }, },
new double[][] {new double[] {-223.738666057587, }, new double[] {-223.107693195343, }, new double[] {-221.5181016922, }, new double[] {-219.485520839691, }, new double[] {-222.180121421814, }, new double[] {-217.790515899658, }, new double[] {-213.734757423401, }, new double[] {-209.343060493469, }, new double[] {-205.11899638176, }, new double[] {-201.690303564072, }, new double[] {-198.105330705643, }, new double[] {-194.682081222534, }, new double[] {-190.896852016449, }, new double[] {-187.67586517334, }, new double[] {-184.377585411072, }, new double[] {-180.474718570709, }, new double[] {-178.086614608765, }, new double[] {-176.604082107544, }, new double[] {-176.39265537262, }, new double[] {-175.577492713928, }, },
new double[][] {new double[] {-175.370005607605, }, new double[] {-177.170140266418, }, new double[] {-180.338006973267, }, new double[] {-184.125595092773, }, new double[] {-188.407241821289, }, new double[] {-193.047540664673, }, new double[] {-198.715126037598, }, new double[] {-203.71453499794, }, new double[] {-208.486701965332, }, new double[] {-215.472587585449, }, new double[] {-219.170001983643, }, new double[] {-219.549868106842, }, new double[] {-220.78182888031, }, new double[] {-220.769272327423, }, new double[] {-220.698010444641, }, new double[] {-221.682820320129, }, new double[] {-221.99829864502, }, new double[] {-221.16769361496, }, new double[] {-219.863522529602, }, new double[] {-217.586733341217, }, },
new double[][] {new double[] {-213.798302173614, }, new double[] {-212.273795604706, }, new double[] {-210.980559825897, }, new double[] {-211.041421413422, }, new double[] {-211.317527770996, }, new double[] {-210.918782234192, }, new double[] {-212.323608398438, }, new double[] {-215.548364639282, }, new double[] {-218.036527872086, }, new double[] {-220.234694719315, }, new double[] {-221.131714105606, }, new double[] {-220.3405418396, }, new double[] {-217.359835863113, }, new double[] {-212.842123508453, }, new double[] {-206.734280586243, }, new double[] {-205.273951053619, }, new double[] {-201.594759464264, }, new double[] {-203.537782669067, }, new double[] {-203.367276191711, }, new double[] {-203.009256362915, }, },
new double[][] {new double[] {-202.144305229187, }, new double[] {-202.084043502808, }, new double[] {-202.363870620728, }, new double[] {-202.642498016357, }, new double[] {-201.745900154114, }, new double[] {-200.390181541443, }, new double[] {-197.911539077759, }, new double[] {-197.557215690613, }, new double[] {-196.925732135773, }, new double[] {-194.579051017761, }, new double[] {-193.722465515137, }, new double[] {-194.152112007141, }, new double[] {-194.743623733521, }, new double[] {-195.754632949829, }, new double[] {-196.98161649704, }, new double[] {-197.604183197021, }, new double[] {-197.973867893219, }, new double[] {-200.451043128967, }, new double[] {-201.974787712097, }, new double[] {-202.676228046417, }, },
new double[][] {new double[] {-202.673658370972, }, new double[] {-202.31508731842, }, new double[] {-200.916681289673, }, new double[] {-199.01060628891, }, new double[] {-197.421711921692, }, new double[] {-197.628890991211, }, new double[] {-196.923381328583, }, new double[] {-195.292456150055, }, new double[] {-193.508704185486, }, new double[] {-192.215452194214, }, new double[] {-190.194973945618, }, new double[] {-186.194767475128, }, new double[] {-182.925354003906, }, new double[] {-180.590078353882, }, new double[] {-179.101360797882, }, new double[] {-177.028070449829, }, new double[] {-174.676071643829, }, new double[] {-175.097765922546, }, new double[] {-175.622539043427, }, new double[] {-174.932739257812, }, },
new double[][] {new double[] {-175.320476531982, }, new double[] {-175.616678237915, }, new double[] {-176.18278503418, }, new double[] {-176.612763881683, }, new double[] {-163.747079849243, }, new double[] {-157.002460002899, }, new double[] {-154.251715660095, }, new double[] {-153.809942245483, }, new double[] {-153.650557518005, }, new double[] {-153.987355232239, }, new double[] {-154.521677494049, }, new double[] {-154.172104358673, }, new double[] {-152.796833515167, }, new double[] {-148.996883392334, }, new double[] {-145.936991691589, }, new double[] {-143.617847442627, }, new double[] {-142.90730381012, }, new double[] {-141.302359104157, }, new double[] {-139.781159877777, }, new double[] {-138.3620262146, }, },
new double[][] {new double[] {-136.096974849701, }, new double[] {-135.065319061279, }, new double[] {-135.296760082245, }, new double[] {-135.829177379608, }, new double[] {-135.565976142883, }, new double[] {-134.323906898499, }, new double[] {-133.707225322723, }, new double[] {-132.948554992676, }, new double[] {-131.193247795105, }, new double[] {-129.864725589752, }, new double[] {-129.168213844299, }, new double[] {-127.382054328918, }, new double[] {-126.986826896667, }, new double[] {-126.260524749756, }, new double[] {-125.435942649841, }, new double[] {-124.919689178467, }, new double[] {-123.801239967346, }, new double[] {-122.985007286072, }, new double[] {-120.943987846375, }, new double[] {-119.024091720581, }, },
new double[][] {new double[] {-114.281638145447, }, new double[] {-111.60290145874, }, new double[] {-109.43155002594, }, new double[] {-106.392702102661, }, new double[] {-103.968857765198, }, new double[] {-101.651205062866, }, new double[] {-99.574842453003, }, new double[] {-97.9136161804199, }, new double[] {-95.7549753189087, }, new double[] {-93.1585655212402, }, new double[] {-91.7738914489746, }, new double[] {-90.4327802658081, }, new double[] {-89.1411981582642, }, new double[] {-88.1883430480957, }, new double[] {-86.3061246871948, }, new double[] {-84.8329305648804, }, new double[] {-83.6011075973511, }, new double[] {-82.0048933029175, }, new double[] {-79.8538236618042, }, new double[] {-78.5440187454224, }, },
new double[][] {new double[] {-72.6380939483643, }, new double[] {-71.9514474868775, }, new double[] {-70.921745300293, }, new double[] {-69.9292669296264, }, new double[] {-68.8480415344238, }, new double[] {-67.4683446884155, }, new double[] {-66.2092685699463, }, new double[] {-65.2682809829712, }, new double[] {-64.8522205352783, }, new double[] {-64.5093269348145, }, new double[] {-64.5186977386474, }, new double[] {-66.3325319290161, }, new double[] {-68.1071481704712, }, new double[] {-69.6915273666382, }, new double[] {-71.1509895324707, }, new double[] {-72.9111118316651, }, new double[] {-75.5010204315185, }, new double[] {-77.2409257888794, }, new double[] {-79.9011964797974, }, new double[] {-82.1692228317261, }, },
new double[][] {new double[] {-85.7545442581176, }, new double[] {-87.5802946090698, }, new double[] {-89.7784452438354, }, new double[] {-91.4538898468017, }, new double[] {-93.0924510955811, }, new double[] {-93.1203365325928, }, new double[] {-94.0235977172852, }, new double[] {-95.1873769760132, }, new double[] {-96.2274551391601, }, new double[] {-98.0272006988525, }, new double[] {-99.2514038085937, }, new double[] {-100.68478012085, }, new double[] {-102.073491096497, }, new double[] {-103.726270675659, }, new double[] {-104.638691902161, }, new double[] {-106.997621536255, }, new double[] {-108.948499679565, }, new double[] {-111.95158290863, }, new double[] {-115.135467529297, }, new double[] {-117.671502113342, }, },
new double[][] {new double[] {-124.517652511597, }, new double[] {-128.745668411255, }, new double[] {-130.498511314392, }, new double[] {-128.907930850983, }, new double[] {-123.242866516113, }, new double[] {-115.608522891998, }, new double[] {-111.840713977814, }, new double[] {-102.889326572418, }, new double[] {-107.370289325714, }, new double[] {-123.643071174622, }, new double[] {-133.161675930023, }, new double[] {-138.102213382721, }, new double[] {-141.932594299316, }, new double[] {-144.335800170898, }, new double[] {-146.181443214416, }, new double[] {-147.964165687561, }, new double[] {-148.568785190582, }, new double[] {-150.48711681366, }, new double[] {-153.809026241302, }, new double[] {-156.683390617371, }, },
new double[][] {new double[] {-163.699398994446, }, new double[] {-166.502598762512, }, new double[] {-166.763886928558, }, new double[] {-171.590029239655, }, new double[] {-173.80300617218, }, new double[] {-176.843134880066, }, new double[] {-179.157609939575, }, new double[] {-177.909704208374, }, new double[] {-177.241945266724, }, new double[] {-177.643057823181, }, new double[] {-178.056718826294, }, new double[] {-179.445883750916, }, new double[] {-180.613472938538, }, new double[] {-183.588305950165, }, new double[] {-185.117668151855, }, new double[] {-185.768501281738, }, new double[] {-187.363434791565, }, new double[] {-186.325472354889, }, new double[] {-187.316840171814, }, new double[] {-188.879105567932, }, },
new double[][] {new double[] {-189.807577133179, }, new double[] {-189.777243614197, }, new double[] {-190.375645637512, }, new double[] {-191.397549629211, }, new double[] {-192.339250564575, }, new double[] {-192.003441810608, }, new double[] {-190.803119659424, }, new double[] {-194.857475757599, }, new double[] {-161.634162187576, }, new double[] {-147.157834768295, }, new double[] {-142.486424207687, }, new double[] {-136.04155254364, }, new double[] {-123.641753911972, }, new double[] {-120.588172912598, }, new double[] {-114.775688648224, }, new double[] {-104.329540491104, }, new double[] {-91.2121903896332, }, new double[] {-47.3250479698181, }, new double[] {-43.3110284805298, }, new double[] {-39.2864627838135, }, },
new double[][] {new double[] {-39.0633914470673, }, new double[] {-44.3094365596771, }, new double[] {-54.9935026168823, }, new double[] {-60.7832813262939, }, new double[] {-54.4909243583679, }, new double[] {-44.1480212211609, }, new double[] {-31.6482119560242, }, new double[] {-7.25097560882569, }, new double[] {4.81142950057983, }, new double[] {11.9187707901001, }, new double[] {10.1670627593994, }, new double[] {6.96039962768556, }, new double[] {0.921338081359858, }, new double[] {-2.39702081680297, }, new double[] {-3.53009366989136, }, new double[] {-18.9267783164978, }, new double[] {-34.0860476493835, }, new double[] {-25.6412591934204, }, new double[] {-34.6913318634033, }, new double[] {-44.2907638549805, }, },
new double[][] {new double[] {-54.1934094429016, }, new double[] {-60.4623718261719, }, new double[] {-65.5893850326538, }, new double[] {-71.3120927810669, }, new double[] {-80.6216216087341, }, new double[] {-91.8794345855713, }, new double[] {-103.636072635651, }, new double[] {-110.623879432678, }, new double[] {-116.033832550049, }, new double[] {-118.096625328064, }, new double[] {-118.931234836578, }, new double[] {-133.219728708267, }, new double[] {-163.540103435516, }, new double[] {-180.360753059387, }, new double[] {-194.945493221283, }, new double[] {-205.111218452454, }, new double[] {-208.009877204895, }, new double[] {-209.771028995514, }, new double[] {-218.675440788269, }, new double[] {-225.294324874878, }, },
new double[][] {new double[] {-225.375849246979, }, new double[] {-224.802057743073, }, new double[] {-223.994093418121, }, new double[] {-223.877509593964, }, new double[] {-223.259377002716, }, new double[] {-222.442852497101, }, new double[] {-221.201901912689, }, new double[] {-221.990078926086, }, new double[] {-224.310982227325, }, new double[] {-222.806279182434, }, new double[] {-223.738941669464, }, new double[] {-225.262345790863, }, new double[] {-224.833250522614, }, new double[] {-224.807221412659, }, new double[] {-225.56470823288, }, new double[] {-227.99573469162, }, new double[] {-227.624898910522, }, new double[] {-226.601884365082, }, new double[] {-226.04639673233, }, new double[] {-228.269919872284, }, },
new double[][] {new double[] {-226.76299571991, }, new double[] {-223.18963098526, }, new double[] {-219.660964012146, }, new double[] {-222.185649871826, }, new double[] {-224.968632698059, }, new double[] {-225.460267543793, }, new double[] {-225.921131134033, }, new double[] {-227.474471569061, }, new double[] {-225.565964698791, }, new double[] {-228.1861743927, }, new double[] {-223.306717395782, }, new double[] {-220.422293186188, }, new double[] {-224.029201507568, }, new double[] {-217.39966583252, }, new double[] {-217.462991714478, }, new double[] {-211.779437065125, }, new double[] {-209.344681739807, }, new double[] {-215.179944515228, }, new double[] {-214.889465808868, }, new double[] {-221.151821613312, }, },
new double[][] {new double[] {-158.178803920746, }, new double[] {-145.350578784943, }, new double[] {-142.558217048645, }, new double[] {-147.192420005798, }, new double[] {-151.749524593353, }, new double[] {-155.179206371307, }, new double[] {-155.039090156555, }, new double[] {-160.186295986176, }, new double[] {-168.581360816956, }, new double[] {-173.898019313812, }, new double[] {-184.155993461609, }, new double[] {-174.373871326447, }, new double[] {-180.032110214233, }, new double[] {-172.745548248291, }, new double[] {-172.342401027679, }, new double[] {-168.67197227478, }, new double[] {-168.033874034882, }, new double[] {-164.938849925995, }, new double[] {-170.35885477066, }, new double[] {-165.032995700836, }, },
new double[][] {new double[] {-160.545920848846, }, new double[] {-146.631249904633, }, new double[] {-160.253050804138, }, new double[] {-160.741216182709, }, new double[] {-162.210649013519, }, new double[] {-160.091834068298, }, new double[] {-167.056497573853, }, new double[] {-184.118323802948, }, new double[] {-190.161235809326, }, new double[] {-189.665645122528, }, new double[] {-188.683218479156, }, new double[] {-188.714646339417, }, new double[] {-187.111947059631, }, new double[] {-186.881519317627, }, new double[] {-186.683702945709, }, new double[] {-183.47087097168, }, new double[] {-175.676923751831, }, new double[] {-168.915118694305, }, new double[] {-163.994182109833, }, new double[] {-161.491302013397, }, },
new double[][] {new double[] {-181.633317947388, }, new double[] {-186.210169315338, }, new double[] {-187.177518367767, }, new double[] {-188.944968700409, }, new double[] {-188.23566532135, }, new double[] {-189.76075553894, }, new double[] {-185.17608165741, }, new double[] {-180.745872020721, }, new double[] {-176.138630390167, }, new double[] {-173.362497329712, }, new double[] {-172.175274848938, }, new double[] {-170.211232185364, }, new double[] {-169.70875120163, }, new double[] {-169.516139030457, }, new double[] {-170.849638462067, }, new double[] {-173.17046880722, }, new double[] {-177.542086601257, }, new double[] {-187.521514415741, }, new double[] {-190.033716678619, }, new double[] {-209.086944103241, }, },
new double[][] {new double[] {-225.738716602325, }, new double[] {-235.758878231049, }, new double[] {-242.568664073944, }, new double[] {-243.958055973053, }, new double[] {-242.885042190552, }, new double[] {-240.894500255585, }, new double[] {-234.803647994995, }, new double[] {-226.971974372864, }, new double[] {-222.613958835602, }, new double[] {-222.978123188019, }, new double[] {-220.671632766724, }, new double[] {-212.030276298523, }, new double[] {-202.123472213745, }, new double[] {-192.554681777954, }, new double[] {-181.043816566467, }, new double[] {-168.035454750061, }, new double[] {-150.703099250793, }, new double[] {-130.121920108795, }, new double[] {-111.084248542786, }, new double[] {-94.79967212677, }, },
new double[][] {new double[] {-58.9649076461792, }, new double[] {-43.7016677856446, }, new double[] {-33.3240051269531, }, new double[] {-27.51828956604, }, new double[] {-22.4382762908935, }, new double[] {-20.7076606750488, }, new double[] {-17.7764472961426, }, new double[] {-14.8543939590454, }, new double[] {-22.8264350891113, }, new double[] {-6.29442405700683, }, new double[] {-17.144404411316, }, new double[] {-22.3589324951172, }, new double[] {-24.0623922348022, }, new double[] {-24.1401309967041, }, new double[] {-23.6365880966186, }, new double[] {-24.2808065414429, }, new double[] {1.90595340728763, }, new double[] {-12.423999786377, }, new double[] {-19.4005794525147, }, new double[] {-23.8368444442749, }, },
new double[][] {new double[] {-28.6133604049683, }, new double[] {-27.3939561843872, }, new double[] {-26.5979404449463, }, new double[] {-25.3609943389893, }, new double[] {-21.0589199066162, }, new double[] {-16.2035140991211, }, new double[] {-9.09558105468749, }, new double[] {-4.17276382446288, }, new double[] {0.114654541015627, }, new double[] {3.50993347167968, }, new double[] {4.52042388916014, }, new double[] {5.87218666076661, }, new double[] {6.83679580688478, }, new double[] {8.20201492309569, }, new double[] {7.15472221374511, }, new double[] {6.37898826599122, }, new double[] {5.44633388519286, }, new double[] {2.88831520080567, }, new double[] {1.78671073913574, }, new double[] {1.54877662658693, }, },

               };
            #endregion

            double[][][] inputs = new double[recordedNavigationGestureSequences.Count() + recordedZoomGestureSequences.Count()][][];
            int[] outputs = new int[recordedNavigationGestureSequences.Count() + recordedZoomGestureSequences.Count()];
            for (int i = 0; i < recordedNavigationGestureSequences.Count(); i++)
            {
                inputs[i] = recordedNavigationGestureSequences[i];
                if (centerStatistics)
                {
                    Accord.Statistics.Tools.Center(inputs[i]);
                }
                outputs[i] = 0;
            }
            for (int i = 0; i < recordedZoomGestureSequences.Count(); i++)
            {
                int j = i + recordedNavigationGestureSequences.Count();
                inputs[j] = recordedZoomGestureSequences[i];
                if (centerStatistics)
                {
                    Accord.Statistics.Tools.Center(inputs[j]);
                }
                outputs[j] = 1;
            }

            HiddenMarkovModelLearn(inputs, outputs);
        }

        public void HiddenMarkovModelLearn(double[][][] inputs, int[] outputs)
        {
            NormalDistribution initial = new NormalDistribution(singleGestureElementDiemension);

            int states = 3;
            double tolerance = 0.1;
            int iterations = 0;
            classifier = new ContinuousSequenceClassifier(Labels.Count(), new Forward(states), initial, Labels);

            var teacher = new ContinuousSequenceClassifierLearning(
                classifier,
                j => new ContinuousBaumWelchLearning(classifier.Models[j])
                {
                    Tolerance = tolerance,
                    Iterations = iterations,
                    FittingOptions = new NormalOptions() { Regularization = 0.1 }
                }
            );
            teacher.UpdateThreshold = false;
            teacher.Run(inputs, outputs);

            // check procedure
            int i = 0;
            int matches = 0;
            foreach (var gesture in inputs)
            {
                int checkedIndex = HiddenMarkovModelDetect(gesture);
                if (outputs[i++] == checkedIndex)
                {
                    matches++;
                }
            }
        }

        public int HiddenMarkovModelDetect(double[][] gesturePath)
        {
            if (centerStatistics)
            {
                Accord.Statistics.Tools.Center(gesturePath);
            }
            double[] responses;
            int classifierResult = classifier.Compute(
                gesturePath,
                out responses);
            return classifierResult;
        }

        // TODO implement as extension method to NuiUser
        protected double CalculateAngleBetweenBodyParts(NuiUserBodyPart beginA, NuiUserBodyPart endA, NuiUserBodyPart beginB, NuiUserBodyPart endB)
        {
            Vector3D lefForearmVector = new Vector3D(
                beginA.X - endA.X,
                beginA.Y - endA.Y,
                beginA.Z - endA.Z
                );
            Vector3D lefArmVector = new Vector3D(
                beginB.X - endB.X,
                beginB.Y - endB.Y,
                beginB.Z - endB.Z
                );
            var cosAngle = Vector3D.DotProduct(lefForearmVector, lefArmVector) / (lefForearmVector.GetLength() * lefArmVector.GetLength());
            var angle = Math.Acos(cosAngle);
            return angle;
        }

        protected double[][] GetCapturedGestureSequence()
        {
            if (singleGestureElements.Count == singleGestureLegth)
            {
                Capturing = false;

                double[][] sequence = new double[singleGestureElements.Count][];

                int i = 0;
                foreach (var singleGestureElement in singleGestureElements)
                {
                    var leftForearmArmAngle = CalculateAngleBetweenBodyParts(
                        singleGestureElement.LeftElbow, singleGestureElement.LeftHand,
                        singleGestureElement.LeftElbow, singleGestureElement.LeftShoulder);
                    var rightForearmArmAngle = CalculateAngleBetweenBodyParts(
                        singleGestureElement.RightElbow, singleGestureElement.RightHand,
                        singleGestureElement.RightElbow, singleGestureElement.RightShoulder);
                    var leftArmHipAngle = CalculateAngleBetweenBodyParts(
                        singleGestureElement.LeftShoulder, singleGestureElement.LeftElbow,
                        singleGestureElement.LeftShoulder, singleGestureElement.LeftHip);
                    var rightArmHipAngle = CalculateAngleBetweenBodyParts(
                        singleGestureElement.RightShoulder, singleGestureElement.RightElbow,
                        singleGestureElement.RightShoulder, singleGestureElement.RightHip);
                    sequence[i++] = new double[] { leftForearmArmAngle, rightForearmArmAngle, leftArmHipAngle, rightArmHipAngle };
                }

                ClearSingleGesture();
                return sequence;
            }
            else
            {
                return null;
            }
        }

        protected void Tracker_UserMoved(object sender, Nui.Vision.NuiUserEventArgs e)
        {
            if (Capturing)
            {
                if (singleGestureElements.Count == singleGestureLegth)
                {
                    if (GestureCaptureComplete != null)
                    {
                        GestureCaptureComplete(GetCapturedGestureSequence());
                    }
                }
                else
                {

                    // TODO implement frameDrops to increase distance between points in gesture sequence
                    // TODO deal with multiple users
                    var user = e.Users.First();
                    singleGestureElements.Add(new NuiUser()
                    {
                        LeftElbow = user.LeftElbow,
                        LeftShoulder = user.LeftShoulder,
                        LeftHand = user.LeftHand,
                        LeftHip = user.LeftHip,
                        RightElbow = user.RightElbow,
                        RightShoulder = user.RightShoulder,
                        RightHand = user.RightHand,
                        RightHip = user.RightHip,
                    });
                }
            }
        }
    }
}
